<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Chi Tiết Truyện</title>
  <link rel="stylesheet" href="trangchu_style.css">
</head>
<body>
  <div class="content">
    <section class="truyen-detail">
      <div class="detail-content">
        <button onclick="history.back()" class="back">← Quay lại</button>
        <div class="detail-header">
          <img class="detail-image" src="" alt="Truyện">
          <div class="detail-info">
            <h2 class="detail-title"></h2>
            <p class="detail-author">Tác giả: <span></span></p>
            <p class="detail-views">Lượt xem: <span></span></p>
            <p class="detail-follows">Theo dõi: <span></span></p>
            <p class="detail-status">Trạng thái: <span></span></p>
            <div class="detail-genres"></div>
          </div>
        </div>
        <p class="detail-description"></p>
        <h3>Danh sách chương</h3>
        <div class="chapter-list"></div>
        <div class="detail-actions">
          <button class="read-first">📖 Đọc từ đầu</button>
          <button class="follow">💚 Theo dõi</button>
          <button class="like">💜 Thích</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    fetch('data/truyen.json')
      .then(res => res.json())
      .then(truyens => {
        const truyen = truyens.find(t => t.id === id);
        if (!truyen) {
          document.body.innerHTML = '<h2 style="color:white;text-align:center">Không tìm thấy truyện!</h2>';
          return;
        }

        document.querySelector('.detail-title').textContent = truyen.title;
        document.querySelector('.detail-author span').textContent = truyen.author;
        document.querySelector('.detail-views span').textContent = truyen.views;
        document.querySelector('.detail-follows span').textContent = truyen.follows;
        document.querySelector('.detail-status span').textContent = truyen.status;
        document.querySelector('.detail-image').src = truyen.image;
        document.querySelector('.detail-description').textContent = truyen.description;

        const genres = document.querySelector('.detail-genres');
        genres.innerHTML = '';
        truyen.genres.forEach(tag => {
          const span = document.createElement('span');
          span.className = 'genre';
          span.textContent = tag;
          genres.appendChild(span);
        });

        const chapterList = document.querySelector('.chapter-list');
        chapterList.innerHTML = '';
        for (let i = 1; i <= truyen.chapters; i++) {
          const a = document.createElement('a');
          a.href = `#chuong-${i}`;
          a.textContent = `Chương ${i}`;
          a.className = 'chapter-item';
          chapterList.appendChild(a);
        }
      });
  </script>
</body>
</html>
