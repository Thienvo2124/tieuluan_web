<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng Nhập / Đăng Ký</title>
    <link rel="stylesheet" href="authStyle.css">
</head>

<body>

    <main class="auth-container">
        <form id="login-form" class="auth-form">
            <h2>Đăng Nhập</h2>
            <div class="input-group">
                <label for="login-username">Tên đăng nhập</label>
                <input type="text" id="login-username" required>
            </div>
            <div class="input-group">
                <label for="login-password">Mật khẩu</label>
                <input type="password" id="login-password" required>
            </div>
            <button type="submit" class="button-submit">Đăng Nhập</button>
            <p class="toggle-link">Chưa có tài khoản? <a href="#" id="show-register">Đăng Ký ngay</a></p>
        </form>

        <form id="register-form" class="auth-form hidden">
            <h2>Đăng Ký</h2>
            <div class="input-group">
                <label for="register-username">Tên đăng nhập</label>
                <input type="text" id="register-username" required>
            </div>
            <div class="input-group">
                <label for="register-password">Mật khẩu</label>
                <input type="password" id="register-password" required>
            </div>
            <div class="input-group">
                <label for="register-confirm-password">Xác nhận mật khẩu</label>
                <input type="password" id="register-confirm-password" required>
            </div>
            <button type="submit" class="button-submit">Đăng Ký</button>
            <p class="toggle-link">Đã có tài khoản? <a href="#" id="show-login">Đăng Nhập</a></p>
            <p class="toggle-link"><a href="trangchu_index">← Quay lại trang chủ</a></p>

        </form>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const loginForm = document.getElementById('login-form');
                const registerForm = document.getElementById('register-form');
                const showLoginLink = document.getElementById('show-login');
                const showRegisterLink = document.getElementById('show-register');

                // Chuyển đổi giữa form Đăng nhập và Đăng ký
                showRegisterLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    loginForm.classList.add('hidden');
                    registerForm.classList.remove('hidden');
                });

                showLoginLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    registerForm.classList.add('hidden');
                    loginForm.classList.remove('hidden');
                });

                // Xử lý form Đăng ký
                registerForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const username = document.getElementById('register-username').value;
                    const password = document.getElementById('register-password').value;
                    const confirmPassword = document.getElementById('register-confirm-password').value;

                    if (password !== confirmPassword) {
                        alert('Mật khẩu xác nhận không khớp!');
                        return;
                    }

                    // Lưu thông tin người dùng vào localStorage
                    const user = { username, password };
                    localStorage.setItem(username, JSON.stringify(user));
                    alert('Đăng ký thành công!');

                    // Chuyển sang form đăng nhập sau khi đăng ký
                    loginForm.classList.remove('hidden');
                    registerForm.classList.add('hidden');
                });

                // Xử lý form Đăng nhập
                loginForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const username = document.getElementById('login-username').value;
                    const password = document.getElementById('login-password').value;

                    // Lấy thông tin người dùng từ localStorage
                    const storedUser = JSON.parse(localStorage.getItem(username));

                    if (storedUser && storedUser.password === password) {
                        alert('Đăng nhập thành công!');
                        // Chuyển hướng đến trang chính
                        window.location.href = '../webtruyen/index.html';
                    } else {
                        alert('Tên đăng nhập hoặc mật khẩu không đúng!');
                    }
                });
            });
        </script>
    </main>

    <script src="scripts/auth.js"></script>
</body>

</html>